
<!DOCTYPE html>
<html lang="en" ng-app="lostBasketApp">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">

<title>Lost basket Optimizer</title>

<!-- Bootstrap Core CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- Custom CSS -->
<link href="css/custom.css" rel="stylesheet">
<!-- Custom CSS -->
<!-- Custom Fonts -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<link
	href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
	rel="stylesheet">

<link
	href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
	rel="stylesheet">
</head>


<link rel="stylesheet" type="text/css"
	href="https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />

<!-- jQuery library -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>


<script
	src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
<script type="text/javascript"
	src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript"
	src="https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>

<script src="//d3js.org/d3.v3.min.js"></script>
<!-- Custom Core JavaScript -->
<script src="js/custom.js"></script>
<body ng-controller="lostBasketController">

	<div id="wrapper">

		<!-- Navigation -->
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="index.html">Lost basket Optimizer</a>
			</div>
			<!-- Top Menu Items -->

			<ul class="nav navbar-right top-nav">
				<li class="dropdown"><a href="#" class="dropdown-toggle"
					data-toggle="dropdown"><i class="fa fa-bell"></i> <b
						class="caret"></b></a>
					<ul class="dropdown-menu alert-dropdown">
						<li><a href="#">Alert Name <span
								class="label label-default">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-primary">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-success">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span class="label label-info">Alert
									Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-warning">Alert Badge</span></a></li>
						<li><a href="#">Alert Name <span
								class="label label-danger">Alert Badge</span></a></li>
						<li class="divider"></li>
						<li><a href="#">View All</a></li>
					</ul></li>
				<li class="dropdown"><a href="#" class="dropdown-toggle"
					data-toggle="dropdown"><i class="fa fa-user"></i> Siva Kumar C
						<b class="caret"></b></a></li>
			</ul>
			<!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav side-nav">
					<li><a href="index.html"><i class="fa fa-fw fa-dashboard"></i>
							Simulation</a></li>
					<li><a href="optimizer.html"><i
							class="fa fa-fw fa-bar-chart-o"></i> Optimizer</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</nav>

		<div id="page-wrapper">

			<div class="container-fluid">

				<!-- Page Heading -->
				<div class="row">
					<div class="col-lg-12 paddingLeft">
						<h1 class="page-header">Lost basket Optimizer</h1>
					</div>
				</div>
				<!-- /.row -->

			</div>
			<!-- /.container-fluid -->

			<!-- CATEGORY -->
			<div class="row">

				<div class="col-lg-4 well">

					<div class="form-group">
						<div>
							<label> Step 1</label>
						</div>
						<label for="select">Select Category</label> <select
							ng-model="category" class="form-control">
							<option>Category A</option>
							<option>Category B</option>
							<option>Category C</option>
						</select>
					</div>
				</div>
				<div class="col-lg-4 well">
					<div class="form-group">
						<div>
							<label> Step 2</label>
						</div>
						<div>
							<label>Date Range :</label>
						</div>
						<input type="text" class="form-control" name="daterange" />

						<script type="text/javascript">
							$(function() {
								$('input[name="daterange"]').daterangepicker();
							});
						</script>
					</div>
				</div>
				<div class="col-lg-4 well">
					<div class="form-group">
						<div>
							<label> Step 3</label>
						</div>
						<label>Geography</label> <input class="form-control"
							ng-model="geography" placeholder="Enter Geography">
					</div>

				</div>

				<ul class="nav nav-tabs col-lg-12 paddingBottom">
					<li class="active"><a data-toggle="tab" href="#home"><label>Data</label></a></li>
					<li><a data-toggle="tab" href="#menu1"><label>Selected
								Data</label></a></li>
					<li><a data-toggle="tab" href="#menu2"><label>Chart</label></a></li>
				</ul>
				<div class="tab-content">
					<div id="home"
						class="col-lg-12  paddingLeft tab-pane fade in active">
						<div class="table-responsive">
							<table class="table table-bordered table-hover table-striped">
								<thead>
									<tr>
										<th>Flavour</th>
										<th>Pack Content</th>
										<th>User</th>
										<th>Variant</th>
										<th>Brand</th>
										<th>Segement</th>
										<th>National Distribution</th>
										<th>Retail Chain A</th>
										<th>Select/Unselect</th>
									</tr>
								</thead>
								<tbody>
									<tr
										ng-repeat="input in inputs | filter : category | filter : geography">
										<td>{{input.flavour}}</td>
										<td>{{input.packContent}}</td>
										<td>{{input.user}}</td>
										<td>{{input.variant}}</td>
										<td>{{input.brand}}</td>
										<td>{{input.segment}}</td>
										<td>{{input.nationalDistribution}}</td>
										<td>{{input.retailChainA}}</td>
										<td><input type="checkbox" ng-model="selectedData"
											ng-checked="exist(input)" ng-click="select(input)"></input></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div id="menu1" class="tab-pane fade col-lg-12">
						<h1>Selected Data from previous tab</h1>
						<div class="table-responsive">
							<table class="table table-bordered table-hover table-striped">
								<thead>
									<tr>
										<th>Flavour</th>
										<th>Pack Content</th>
										<th>User</th>
										<th>Variant</th>
										<th>Brand</th>
										<th>Segement</th>
										<th>National Distribution</th>
										<th>Retail Chain A</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="input in selected">
										<td>{{input.flavour}}</td>
										<td>{{input.packContent}}</td>
										<td>{{input.user}}</td>
										<td>{{input.variant}}</td>
										<td>{{input.brand}}</td>
										<td>{{input.segment}}</td>
										<td>{{input.nationalDistribution}}</td>
										<td>{{input.retailChainA}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div id="menu2" class="tab-pane fade col-lg-12">
						<h1>Populated from static Json file!!!!</h1>
						<div class="row">
							<div class="col-lg-12" id="chartArea"></div>
						</div>

						<script>
							var margin = {
								top : 30,
								right : 120,
								bottom : 0,
								left : 120
							}, width = 960 - margin.left - margin.right, height = 500
									- margin.top - margin.bottom;

							var x = d3.scale.linear().range([ 0, width ]);

							var barHeight = 20;

							var color = d3.scale.ordinal().range(
									[ "steelblue", "#ccc" ]);

							var duration = 750, delay = 25;

							var partition = d3.layout.partition().value(
									function(d) {
										return d.size;
									});

							var xAxis = d3.svg.axis().scale(x).orient("top");

							var svg = d3
									.select("#chartArea")
									.append("svg")
									.attr("width",
											width + margin.left + margin.right)
									.attr("height",
											height + margin.top + margin.bottom)
									.append("g").attr(
											"transform",
											"translate(" + margin.left + ","
													+ margin.top + ")");

							svg.append("rect").attr("class", "background")
									.attr("width", width)
									.attr("height", height).on("click", up);

							svg.append("g").attr("class", "x axis");

							svg.append("g").attr("class", "y axis").append(
									"line").attr("y1", "100%");

							d3.json("chartData.json", function(error, root) {
								if (error)
									throw error;

								partition.nodes(root);
								x.domain([ 0, root.value ]).nice();
								down(root, 0);
							});

							function down(d, i) {
								if (!d.children || this.__transition__)
									return;
								var end = duration + d.children.length * delay;

								// Mark any currently-displayed bars as exiting.
								var exit = svg.selectAll(".enter").attr(
										"class", "exit");

								// Entering nodes immediately obscure the clicked-on bar, so hide it.
								exit.selectAll("rect").filter(function(p) {
									return p === d;
								}).style("fill-opacity", 1e-6);

								// Enter the new bars for the clicked-on data.
								// Per above, entering bars are immediately visible.
								var enter = bar(d).attr("transform", stack(i))
										.style("opacity", 1);

								// Have the text fade-in, even though the bars are visible.
								// Color the bars as parents; they will fade to children if appropriate.
								enter.select("text")
										.style("fill-opacity", 1e-6);
								enter.select("rect").style("fill", color(true));

								// Update the x-scale domain.
								x.domain([ 0, d3.max(d.children, function(d) {
									return d.value;
								}) ]).nice();

								// Update the x-axis.
								svg.selectAll(".x.axis").transition().duration(
										duration).call(xAxis);

								// Transition entering bars to their new position.
								var enterTransition = enter.transition()
										.duration(duration).delay(
												function(d, i) {
													return i * delay;
												}).attr(
												"transform",
												function(d, i) {
													return "translate(0,"
															+ barHeight * i
															* 1.2 + ")";
												});

								// Transition entering text.
								enterTransition.select("text").style(
										"fill-opacity", 1);

								// Transition entering rects to the new x-scale.
								enterTransition.select("rect").attr("width",
										function(d) {
											return x(d.value);
										}).style("fill", function(d) {
									return color(!!d.children);
								});

								// Transition exiting bars to fade out.
								var exitTransition = exit.transition()
										.duration(duration).style("opacity",
												1e-6).remove();

								// Transition exiting bars to the new x-scale.
								exitTransition.selectAll("rect").attr("width",
										function(d) {
											return x(d.value);
										});

								// Rebind the current node to the background.
								svg.select(".background").datum(d).transition()
										.duration(end);

								d.index = i;
							}

							function up(d) {
								if (!d.parent || this.__transition__)
									return;
								var end = duration + d.children.length * delay;

								// Mark any currently-displayed bars as exiting.
								var exit = svg.selectAll(".enter").attr(
										"class", "exit");

								// Enter the new bars for the clicked-on data's parent.
								var enter = bar(d.parent).attr(
										"transform",
										function(d, i) {
											return "translate(0," + barHeight
													* i * 1.2 + ")";
										}).style("opacity", 1e-6);

								// Color the bars as appropriate.
								// Exiting nodes will obscure the parent bar, so hide it.
								enter.select("rect").style("fill", function(d) {
									return color(!!d.children);
								}).filter(function(p) {
									return p === d;
								}).style("fill-opacity", 1e-6);

								// Update the x-scale domain.
								x.domain(
										[
												0,
												d3.max(d.parent.children,
														function(d) {
															return d.value;
														}) ]).nice();

								// Update the x-axis.
								svg.selectAll(".x.axis").transition().duration(
										duration).call(xAxis);

								// Transition entering bars to fade in over the full duration.
								var enterTransition = enter.transition()
										.duration(end).style("opacity", 1);

								// Transition entering rects to the new x-scale.
								// When the entering parent rect is done, make it visible!
								enterTransition.select("rect").attr("width",
										function(d) {
											return x(d.value);
										}).each(
										"end",
										function(p) {
											if (p === d)
												d3.select(this).style(
														"fill-opacity", null);
										});

								// Transition exiting bars to the parent's position.
								var exitTransition = exit.selectAll("g")
										.transition().duration(duration).delay(
												function(d, i) {
													return i * delay;
												}).attr("transform",
												stack(d.index));

								// Transition exiting text to fade out.
								exitTransition.select("text").style(
										"fill-opacity", 1e-6);

								// Transition exiting rects to the new scale and fade to parent color.
								exitTransition.select("rect").attr("width",
										function(d) {
											return x(d.value);
										}).style("fill", color(true));

								// Remove exiting nodes when the last child has finished transitioning.
								exit.transition().duration(end).remove();

								// Rebind the current parent to the background.
								svg.select(".background").datum(d.parent)
										.transition().duration(end);
							}

							// Creates a set of bars for the given data node, at the specified index.
							function bar(d) {
								var bar = svg.insert("g", ".y.axis").attr(
										"class", "enter").attr("transform",
										"translate(0,5)").selectAll("g").data(
										d.children).enter().append("g").style(
										"cursor",
										function(d) {
											return !d.children ? null
													: "pointer";
										}).on("click", down);

								bar.append("text").attr("x", -6).attr("y",
										barHeight / 2).attr("dy", ".35em")
										.style("text-anchor", "end").text(
												function(d) {
													return d.name;
												});

								bar.append("rect").attr("width", function(d) {
									return x(d.value);
								}).attr("height", barHeight);

								return bar;
							}

							// A stateful closure for stacking bars horizontally.
							function stack(i) {
								var x0 = 0;
								return function(d) {
									var tx = "translate(" + x0 + ","
											+ barHeight * i * 1.2 + ")";
									x0 += x(d.value);
									return tx;
								};
							}
						</script>
					</div>
				</div>

				<div class="col-6 floatRight">
					<button type="button" class="btn btn-primary">Add to
						Optimize!!</button>
				</div>
			</div>
			<!-- CATEGORY -->
		</div>
		<!-- /#page-wrapper -->

	</div>
	<!-- /#wrapper -->


</body>

</html>
